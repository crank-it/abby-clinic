# ============================================================================
# SECTION 1: CORE RULES (Never change this section)
# ============================================================================

## Stack
- Framework: Next.js 14+ (App Router)
- Styling: Tailwind CSS ONLY
- Components: shadcn/ui
- Database: Supabase
- Deployment: Vercel

## Critical Rules

### Styling (Non-negotiable)
1. TAILWIND ONLY — No custom CSS files, no CSS modules, no inline style={{}}
2. USE shadcn/ui — Don't recreate buttons, inputs, cards, dialogs, etc.
3. USE cn() HELPER — For conditional classes: cn("base", condition && "conditional")
4. USE CSS VARIABLES — bg-background, text-foreground, text-muted-foreground, etc.

### File Structure
```
app/
├── (marketing)/          # Public pages
├── (dashboard)/          # Protected pages
├── api/                  # API routes
├── globals.css           # Tailwind + CSS variables ONLY
└── layout.tsx            # Root layout
components/
├── ui/                   # shadcn/ui (don't edit these)
└── [feature]/            # Feature components
lib/
├── supabase/             # Supabase client
└── utils.ts              # cn() helper
```

### Before Writing Any Code
1. Check if shadcn/ui has a component for your need
2. Use Tailwind classes for ALL styling
3. Never create custom CSS

# ============================================================================
# SECTION 2: DESIGN SYSTEM (Abby Clinic Configuration)
# ============================================================================

## Typography

### Fonts

| Purpose | Font Family | Category | Import |
|---------|-------------|----------|--------|
| Headings | Montserrat | sans-serif | `import { Montserrat } from "next/font/google"` |
| Body | Open Sans | sans-serif | `import { Open_Sans } from "next/font/google"` |
| Accent | Vollkorn | serif | `import { Vollkorn } from "next/font/google"` |

### Font Setup (layout.tsx)

```tsx
import { Montserrat, Open_Sans, Vollkorn } from "next/font/google"

const heading = Montserrat({
  subsets: ["latin"],
  variable: "--font-heading",
  weight: ["400", "500", "600", "700"]
})

const body = Open_Sans({
  subsets: ["latin"],
  variable: "--font-body"
})

const accent = Vollkorn({
  subsets: ["latin"],
  variable: "--font-accent"
})

// In <body>:
<body className={`${heading.variable} ${body.variable} ${accent.variable} font-body`}>
```

### Tailwind Config Addition

```ts
// tailwind.config.ts
fontFamily: {
  heading: ["var(--font-heading)", "sans-serif"],
  body: ["var(--font-body)", "sans-serif"],
  accent: ["var(--font-accent)", "serif"],
}
```

### Usage

- Headings: `className="font-heading"`
- Body text: Uses font-body by default
- Accent text: `className="font-accent"`

---

## Colour Palette

### CSS Variables (globals.css)

```css
@layer base {
  :root {
    --background: 222 47% 11%;
    --foreground: 0 0% 100%;
    --primary: 226 53% 56%;
    --primary-foreground: 0 0% 100%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 0 0% 100%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 226 53% 56%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 217 33% 25%;
    --input: 217 33% 25%;
    --ring: 226 53% 56%;
    --radius: 0.5rem;
    --card: 217 33% 17%;
    --card-foreground: 0 0% 100%;
    --popover: 217 33% 17%;
    --popover-foreground: 0 0% 100%;
  }
}
```

### Colour Reference

| Variable | Hex | Usage |
|----------|-----|-------|
| background | #0f172a (slate-900) | Page backgrounds |
| foreground | #ffffff | Primary text |
| primary | #5371CA | Buttons, links, CTAs |
| primary-foreground | #ffffff | Text on primary |
| secondary | #1e293b (slate-800) | Secondary backgrounds |
| muted | #1e293b | Subtle backgrounds |
| muted-foreground | #94a3b8 (slate-400) | Secondary text |
| accent | #5371CA | Highlights, accents |
| border | #334155 (slate-700) | Borders, dividers |
| card | #1e293b | Card backgrounds |

### Usage Examples

```tsx
// Backgrounds
<div className="bg-background">      // Main page (slate-900)
<div className="bg-primary">         // CTA sections (#5371CA)
<div className="bg-secondary">       // Cards, subtle areas
<div className="bg-muted">           // Very subtle backgrounds

// Text
<p className="text-foreground">      // Primary text (white)
<p className="text-muted-foreground"> // Secondary text (slate-400)
<p className="text-primary">         // Accent/link text (#5371CA)

// Borders
<div className="border border-border">
<div className="border-primary">     // Emphasised borders
```

---

## Components (shadcn/ui)

### Install Command

```bash
npx shadcn@latest add button card dialog dropdown-menu form input label select sheet skeleton sonner tabs textarea accordion
```

### Selected Components

**Forms**
- `button` — Clickable actions
- `form` — Form handling with validation
- `input` — Text input fields
- `label` — Form field labels
- `select` — Dropdown selection
- `textarea` — Multi-line text input

**Layout**
- `card` — Content containers
- `accordion` — Collapsible content

**Navigation**
- `dropdown-menu` — Dropdown actions
- `tabs` — Tabbed content

**Overlay**
- `dialog` — Modal dialogs
- `sheet` — Side panel overlay (mobile nav)

**Feedback**
- `skeleton` — Loading placeholders
- `sonner` — Toast notifications

### Import Pattern

```tsx
// Always import from @/components/ui/
import { Button } from "@/components/ui/button"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
```

---

## Quick Reference

### Do's
- Use Tailwind classes for ALL styling
- Use these fonts consistently (heading for h1-h6, body for paragraphs)
- Use CSS variables via Tailwind (bg-primary, text-muted-foreground)
- Import components from @/components/ui/

### Don'ts
- No custom CSS files
- No inline style={{}} props
- No CSS modules
- Don't recreate components that exist in shadcn/ui
- Don't use fonts outside this system

# ============================================================================
# SECTION 3: PAGES & CONTENT
# ============================================================================

## Page Structure

### Server Components (Default)
Use for pages that fetch data. No "use client" directive.

```tsx
import { Metadata } from "next"

export const metadata: Metadata = {
  title: "Page Title | Abby",
  description: "Description for SEO",
}

export default async function Page() {
  return (
    <div className="container py-8 space-y-8">
      {/* Content */}
    </div>
  )
}
```

### Loading States
Every page should have a loading.tsx:

```tsx
import { Skeleton } from "@/components/ui/skeleton"

export default function Loading() {
  return (
    <div className="container py-8 space-y-8">
      <Skeleton className="h-10 w-48" />
      <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        {Array.from({ length: 6 }).map((_, i) => (
          <Skeleton key={i} className="h-32 rounded-lg" />
        ))}
      </div>
    </div>
  )
}
```

### Error States
Every route should have an error.tsx:

```tsx
"use client"

import { Button } from "@/components/ui/button"

export default function Error({ reset }: { error: Error; reset: () => void }) {
  return (
    <div className="flex flex-col items-center justify-center min-h-[400px] space-y-4">
      <h2 className="text-xl font-semibold">Something went wrong</h2>
      <Button onClick={reset}>Try again</Button>
    </div>
  )
}
```

# ============================================================================
# SECTION 4: LAYOUTS
# ============================================================================

## Marketing Layout Pattern

```tsx
// app/(marketing)/layout.tsx
import { Navigation } from "@/components/marketing/navigation"
import { Footer } from "@/components/marketing/footer"

export default function MarketingLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="flex min-h-screen flex-col">
      <Navigation />
      <main className="flex-1">{children}</main>
      <Footer />
    </div>
  )
}
```

## Responsive Patterns

```tsx
// Container
<div className="container py-8">

// Responsive grid
<div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">

// Stack with spacing
<div className="space-y-8">
```

# ============================================================================
# SECTION 5: FORMS
# ============================================================================

## Form Stack
- react-hook-form for state management
- zod for validation
- shadcn/ui Form components for UI

## Standard Form Pattern

```tsx
"use client"

import { zodResolver } from "@hookform/resolvers/zod"
import { useForm } from "react-hook-form"
import { z } from "zod"
import { Button } from "@/components/ui/button"
import {
  Form, FormControl, FormField, FormItem, FormLabel, FormMessage,
} from "@/components/ui/form"
import { Input } from "@/components/ui/input"

const formSchema = z.object({
  name: z.string().min(2, "Name is required"),
  email: z.string().email("Invalid email"),
})

type FormValues = z.infer<typeof formSchema>

export function ContactForm() {
  const form = useForm<FormValues>({
    resolver: zodResolver(formSchema),
    defaultValues: { name: "", email: "" },
  })

  async function onSubmit(values: FormValues) {
    // Handle submission
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
        <FormField
          control={form.control}
          name="name"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Name</FormLabel>
              <FormControl>
                <Input placeholder="Your name" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit" disabled={form.formState.isSubmitting}>
          {form.formState.isSubmitting ? "Submitting..." : "Submit"}
        </Button>
      </form>
    </Form>
  )
}
```

# ============================================================================
# SECTION 6: COMPONENTS
# ============================================================================

## Always Use shadcn/ui For:
- Buttons → `@/components/ui/button`
- Cards → `@/components/ui/card`
- Inputs → `@/components/ui/input`
- Forms → `@/components/ui/form`
- Dialogs/Modals → `@/components/ui/dialog`
- Dropdowns → `@/components/ui/dropdown-menu`
- Tables → `@/components/ui/table`
- Tabs → `@/components/ui/tabs`
- Toasts → `sonner`
- Accordions → `@/components/ui/accordion`

## Component Pattern

```tsx
import { cn } from "@/lib/utils"

interface ComponentProps {
  className?: string
  children: React.ReactNode
}

export function Component({ className, children }: ComponentProps) {
  return (
    <div className={cn("base-styles", className)}>
      {children}
    </div>
  )
}
```

## Icons
Use Lucide React:

```tsx
import { Plus, Pencil, Trash2, Loader2 } from "lucide-react"

<Plus className="h-4 w-4" />
<Loader2 className="h-4 w-4 animate-spin" />
```

# ============================================================================
# END OF RULES
# ============================================================================
